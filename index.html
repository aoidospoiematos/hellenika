<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Cache-control" content="NO-CACHE">
        <link rel="stylesheet" href="Poetry.css">
    </head>
    <body>
        <H1 id="title">Ἁοίδος τῶν ποιημάτων</H1>
        <H1 id="english_title">The Poems' Bard</H1>	
        <div id="sayings_container">	
            <ul id="sayings"></ul>
            <div>
                <audio controls autoplay>
                    <source src="greg.mp3" type="audio/mpeg">  
                </audio>
            </div>
        </div>  

        <script>
            function loadFile(filePath) {
            var result = null;
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", filePath, false);
            xmlhttp.send();
            if (xmlhttp.status==200) {
                result = xmlhttp.responseText;     
            }
            return result;
            } 
            
            var myStuff = loadFile("poetry_injection.txt");           
           
            var myArray = myStuff.split("TITLE:")
            var myCleanedArray = [];

            myArray.forEach(element => {
                if (element !== "") {
                    myCleanedArray.push(element);
                }
            });

            myCleanedArray.forEach(listIt);

            function listIt(item){
                var Poetry_Item = item.split("POEM:");         
                var ul = document.getElementById("sayings");

                var li_one = document.createElement('li');
                var li_two = document.createElement('li');
                var li_three = document.CreateElement('li');

                var audio_widget = document.createElement('audio');
                var audio_source = document.createElement('source');

                li_one.classList.add("stoixonOne");
                li_two.classList.add("stoixonTwo");
                li.three.classList.add("audioContainer");

                li_one.innerHTML = Poetry_Item[0];
                li_two.innerHTML = Poetry_Item[1];
                
                ul.appendChild(li_one);
                ul.appendChild(li_two);
                ul.appendChild(li_three);
                li_three.appendChild(audio_widget).appendChild(audio_source);

                audio_source.setAttribute("src", Poetry_Item[0] + "mp3")
            }
        </script>
    </body>
</html>    